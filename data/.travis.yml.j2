---
language: python
services: docker
env:
  global:
    - ROLE_NAME: {{ role_name }}
before_install:
  - sudo apt-get -qq update
install:
  - python3 -m pip install molecule yamllint ansible-lint
  - python3 -m pip install docker
before_script:
  - cd ../
  - mv ansible-role-$ROLE_NAME $ROLE_NAME
  - cd $ROLE_NAME
script:
  - molecule test
notifications:
  email: false
  slack:
    secure: "execute `travis encrypt "<slack_name>:<token>" --add notifications.slack -x --no-interactive`"
