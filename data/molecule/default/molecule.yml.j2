---
dependency:
  name: galaxy
driver:
  name: vagrant
  provider:
    name: virtualbox
platforms:
  - name: stretch
    box: wate/debian-9
    # memory: 512
    # cpus: 2
    provider_override_args:
      - "vm.synced_folder '${MOLECULE_PROJECT_DIRECTORY}', '/vagrant'"
    # instance_raw_config_args:
    #   - "vm.network 'forwarded_port', guest: 80, host: 8080"
    # provider_raw_config_args:
    #   - "customize ['modifyvm', :id, '--cpuexecutioncap', '50']"
# driver:
#   name: docker
# platforms:
#   - name: instance
#     image: "geerlingguy/docker-${MOLECULE_DISTRO:-debian9}-ansible:latest"
#     command: ${MOLECULE_DOCKER_COMMAND:-""}
#     volumes:
#       - /sys/fs/cgroup:/sys/fs/cgroup:ro
#     privileged: true
#     pre_build_image: true
provisioner:
  name: ansible
  lint:
    name: ansible-lint
    # options:
    #   exclude:
    #     - 306
  config_options:
    defaults:
      hash_behaviour: merge
  options:
    diff: true
  # playbooks:
  #   create: create.yml
  #   prepare: prepare.yml
  #   destroy: destroy.yml
  #   converge: playbook.yml
scenario:
  name: default
  # create_sequence:
  #   - dependency
  #   - create
  #   - prepare
  # check_sequence:
  #   - dependency
  #   - cleanup
  #   - destroy
  #   - create
  #   - prepare
  #   - converge
  #   - check
  #   - destroy
  # converge_sequence:
  #   - dependency
  #   - create
  #   - prepare
  #   - converge
  # destroy_sequence:
  #   - dependency
  #   - cleanup
  #   - destroy
  # test_sequence:
  #   - dependency
  #   - lint
  #   - cleanup
  #   - destroy
  #   - syntax
  #   - create
  #   - prepare
  #   - converge
  #   - idempotence
  #   - side_effect
  #   - verify
  #   - cleanup
  #   - destroy
verifier:
  name: testinfra
  options:
    verbose: true
  lint:
    name: flake8
    options:
      ignore: E501
